<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>YSU SensorTag: API: device related</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">YSU SensorTag
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('_d_e_v.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">API: device related </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="dev_api"></a>
Device API summary</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">commands Acronyms   </th><th class="markdownTableHeadNone">Origin   </th><th class="markdownTableHeadNone">Type   </th><th class="markdownTableHeadNone">TL Cmd0   </th><th class="markdownTableHeadNone">TL Cmd1   </th><th class="markdownTableHeadNone">Parameter structure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="_d_e_v.html#SNP_powerUp_ind">SNP power up Indication</a>   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga9baba627781c846634ce07570d2e8dc1" title="(0x55) Asynchronous Command type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_ASYNC_CMD_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_START_ADV_REQ   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_maskEvent_req ] (<a class="el" href="_d_e_v.html#SNP_maskEvent">SNP mask Event</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Sync Req   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga7aa4b6eb012a8d2d26c5990d473e9b6c" title="(0x35) Synchronous request type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_REQ_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_MASK_EVT_REQ   </td><td class="markdownTableBodyNone">#snpMaskEventReq_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_maskEvent_cnf ] (<a class="el" href="_d_e_v.html#SNP_maskEvent">SNP mask Event</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Sync Rsp   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga6775b0a2a37cde4d10ecd78eae5ef7ce" title="(0x75) Synchronous response type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_RSP_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_MASK_EVENT_RSP   </td><td class="markdownTableBodyNone">#snpMaskEventRsp_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_getRevision_req] (<a class="el" href="_d_e_v.html#SNP_getRevision">Get SNP Revision Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Sync Req   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga7aa4b6eb012a8d2d26c5990d473e9b6c" title="(0x35) Synchronous request type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_REQ_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_GET_REVISION_REQ   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_getRevision_rsp] (<a class="el" href="_d_e_v.html#SNP_getRevision">Get SNP Revision Command</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Sync Rsp   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga6775b0a2a37cde4d10ecd78eae5ef7ce" title="(0x75) Synchronous response type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_RSP_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_GET_REVISION_RSP   </td><td class="markdownTableBodyNone">#snpGetRevisionRsp_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_HCI_req] (<a class="el" href="_d_e_v.html#SNP_HCI">SNP encapsulated HCI Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga9baba627781c846634ce07570d2e8dc1" title="(0x55) Asynchronous Command type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_ASYNC_CMD_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_HCI_CMD_REQ   </td><td class="markdownTableBodyNone">#snpHciCmdReq_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_HCI_rsp] (<a class="el" href="_d_e_v.html#SNP_HCI">SNP encapsulated HCI Command</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga9baba627781c846634ce07570d2e8dc1" title="(0x55) Asynchronous Command type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_ASYNC_CMD_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_HCI_CMD_RSP   </td><td class="markdownTableBodyNone">#snpHciCmdRsp_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_event_ind] (<a class="el" href="_d_e_v.html#SNP_Event_ind">SNP Event indication</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga9baba627781c846634ce07570d2e8dc1" title="(0x55) Asynchronous Command type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_ASYNC_CMD_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_EVENT_IND   </td><td class="markdownTableBodyNone">#snpEvt_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_getStatus_req] (<a class="el" href="_d_e_v.html#SNP_getStatus">Get SNP Status Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Sync Req   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga7aa4b6eb012a8d2d26c5990d473e9b6c" title="(0x35) Synchronous request type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_REQ_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_GET_STATUS_RSP   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_getStatus_rsp] (<a class="el" href="_d_e_v.html#SNP_getStatus">Get SNP Status Command</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Sync Rsp   </td><td class="markdownTableBodyNone">#SNP_NPI_ASYNC_RSP_TYPE   </td><td class="markdownTableBodyNone">#SNP_TEST_RSP   </td><td class="markdownTableBodyNone">#snpGetStatusCmdRsp_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_getRand_req] (<a class="el" href="_d_e_v.html#SNP_getRand">Get Random Number Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Sync Req   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga7aa4b6eb012a8d2d26c5990d473e9b6c" title="(0x35) Synchronous request type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_REQ_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_GET_RAND_REQ   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_getRand_rsp] (<a class="el" href="_d_e_v.html#SNP_getRand">Get Random Number Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Sync Rsp   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga6775b0a2a37cde4d10ecd78eae5ef7ce" title="(0x75) Synchronous response type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_RSP_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_GET_RAND_RSP   </td><td class="markdownTableBodyNone">#snpGetRandRsp_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[SNP_test_req (debug only)] (<a class="el" href="_d_e_v.html#SNP_test">SNP test Command</a>)   </td><td class="markdownTableBodyNone">AP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone">#SNP_NPI_ASYNC_REQ_TYPE   </td><td class="markdownTableBodyNone">#SNP_TEST_REQ   </td><td class="markdownTableBodyNone"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">[SNP_test_rsp (debug only)] (<a class="el" href="_d_e_v.html#SNP_test">SNP test Command</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Async   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga6775b0a2a37cde4d10ecd78eae5ef7ce" title="(0x75) Synchronous response type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_RSP_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_TEST_RSP   </td><td class="markdownTableBodyNone">#snpTestCmdRsp_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">[invalid cmd] (<a class="el" href="_d_e_v.html#Sync_error">SNP synchronous invalid command indication</a>)   </td><td class="markdownTableBodyNone">NP   </td><td class="markdownTableBodyNone">Sync Rsp   </td><td class="markdownTableBodyNone"><a class="el" href="group___s_n_p___n_p_i___t_y_p_e.html#ga6775b0a2a37cde4d10ecd78eae5ef7ce" title="(0x75) Synchronous response type for the BLE simple network processor (cmd0 field of npi frame)">SNP_NPI_SYNC_RSP_TYPE</a>   </td><td class="markdownTableBodyNone">#SNP_SYNC_ERROR_CMD_IND   </td><td class="markdownTableBodyNone"></td></tr>
</table>
<p >all those command have some parameters. those parameters are can be set using teh indicated packed structure. note that all parameter/structure field should be in little-endian format (LSB first). for UUID parameters, take a look at UUID_desc</p>
<h1><a class="anchor" id="SNP_powerUp_ind"></a>
SNP power up Indication</h1>
<p >This event is send by the AP once the device has powered up. This event will be received if the device reset unexpectedly. One reception of this event the AP should consider that the NP lost any previous configuration.</p>
<p >When this event is received, the following services are initialized and ready to be used:</p><ul>
<li>GAP service</li>
<li>GATT service</li>
<li>Device Info Service.</li>
</ul>
<p >This command doesn't have any parameters</p>
<h1><a class="anchor" id="SNP_maskEvent"></a>
SNP mask Event</h1>
<p >This command enable the AP to mask some events. By default, all events are enabled. Purpose is to limit the number of possible wake up condition of the AP and reduce power consumption as much as possible.</p>
<p >All those events can be triggered asynchronously, either due to an action from the AP, or due to an action of the remote peer, or timer expiration.</p>
<p >This request takes as parameter the structure #snpMaskEventReq_t.</p>
<p >Possible Events are listed here: <a class="el" href="group___s_n_p___e_v_e_n_t.html">list of event generated by the SNP.</a> , </p><dl class="section see"><dt>See also</dt><dd>SNP_Event_ind</dd></dl>
<h1><a class="anchor" id="SNP_Event_ind"></a>
SNP Event indication</h1>
<p >This indication is send by the SNP to signal an event. Events can be masked by using the SNP_maskEvent API ([masking event] (<a class="el" href="_d_e_v.html#SNP_maskEvent">SNP mask Event</a>)) (RFU). Only one event will be indicated at a time per packet. if several events occurs, they will each be encapsulated in their own TL packet.</p>
<p >Each event has a 2-bytes Event type. along with this type, some events might have some parameters associated with them.</p>
<p >events parameters are mapped on the snpEvt_t structure, which is a union of #snpConnEstEvt_t, #snpConnTermEvt_t , #snpUpdateConnParamEvt_t , #snpAdvStatusEvt_t and #snpATTMTUSizeEvt_t</p>
<p >Possible Events are listed here: <a class="el" href="group___s_n_p___e_v_e_n_t.html">list of event generated by the SNP.</a></p>
<p >The table bellow list the events and the structure used to MAP the parameter of those events:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Event   </th><th class="markdownTableHeadNone">Parameter structure    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNP_CONN_EST_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpConnEstEvt_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SNP_CONN_TERM_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpConnTermEvt_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNP_CONN_PARAM_UPDATED_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpUpdateConnParamEvt_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SNP_ADV_STARTED_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpAdvStatusEvt_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNP_ADV_ENDED_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpAdvStatusEvt_t    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">SNP_ATT_MTU_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpATTMTUSizeEvt_t    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">SNP_ERROR_EVT   </td><td class="markdownTableBodyNone">#snpEvt_t + #snpConnEstEvt_t   </td></tr>
</table>
<h2><a class="anchor" id="SNP_event_MTU"></a>
about ATT MTU size</h2>
<p >The default ATT_MTU size is set to 23 bytes. this implies that no fragmentation is done at HCI level. The GATT client can request an ATT_MTU_EXCHANGE method to change the maximum possible ATT MTU size. The SNP is configure to manage ATT MTU size up to 251 Bytes. If this update occurs, the corresponding event will be send by the SNP. if this event is not received, the AP must assume that ATT MTU size is 23.</p>
<h2><a class="anchor" id="SNP_event_Error"></a>
about the error event indication</h2>
<p >This error event occurs if something unexpected occurs while SNP is running some operation. The list of all possible SNP errors can be found here <a class="el" href="group___s_n_p___e_r_r_o_r_s.html">list of status generated by the SNP.</a></p>
<h1><a class="anchor" id="SNP_getRevision"></a>
Get SNP Revision Command</h1>
<p >This is use to get the current revision of the SNP API. Along as the full stack revision number as define in the HCI vendor guide.</p>
<p >SNP_getRevision_req does not take any parameters.</p>
<p >SNP_getRevision_rsp parameters are mapped on structure #snpGetRevisionRsp_t.</p>
<h1><a class="anchor" id="SNP_getStatus"></a>
Get SNP Status Command</h1>
<p >This is use to get the current status of the SNP.</p>
<p >SNP_getStatus_req does not take any parameters.</p>
<p >SNP_getStatus_rsp parameters are mapped on structure #snpGetStatusCmdRsp_t.</p>
<h1><a class="anchor" id="SNP_getRand"></a>
Get Random Number Command</h1>
<p >This is use to get a 32 bit random number generated by the SNP TRNG.</p>
<p >SNP_getRand_req does not take any parameters.</p>
<p >SNP_getRand_rsp parameters are mapped on structure #snpGetRandRsp_t.</p>
<h1><a class="anchor" id="SNP_test"></a>
SNP test Command</h1>
<p >Return the heap usage of the SNP. DEBUG use only, this command may not be present in the final release.</p>
<p >SNP_test_req does not take any parameters.</p>
<p >SNP_test_rsp parameters are mapped on structure #snpTestCmdRsp_t.</p>
<h1><a class="anchor" id="SNP_HCI"></a>
SNP encapsulated HCI Command</h1>
<p >This is sending a HCI command. Only the HCI command listed [here] (<a class="el" href="group___s_n_p___a_l_l_o_w_e_d___h_c_i.html">list of all HCI commands allowed by the SNP.</a>) are supported:</p>
<p >This SNP_HCI_req command takes the 2 bytes HCI opcode, as define in the TI HCI vendor guide. Then the parameters as defined for this command in the TI HCI vendor guide. Those parameters can be mapped on the structure #snpHciCmdReq_t</p>
<p >SNP_test_rsp parameters are mapped on structure #snpHciCmdRsp_t.</p>
<h1><a class="anchor" id="Sync_error"></a>
SNP synchronous invalid command indication</h1>
<p >This indication packet will be send over TL if a unknown synchronous packet is send to the TL. An unknown command send as a synchronous packet will prevent any other command to be send. Therefore this indication is send back.</p>
<p >This indication has no parameter.</p>
<p >another asynchronous error event will also be send to signal this error, it will have the opcode of the faulting command as a parameter. see <a class="el" href="_d_e_v.html#SNP_Event_ind">SNP Event indication</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3 </li>
  </ul>
</div>
</body>
</html>
